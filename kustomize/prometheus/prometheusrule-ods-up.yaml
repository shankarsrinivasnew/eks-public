apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: kube-prometheus-stack
    release: prometheus
  name: ods-up-alerts
  namespace: prometheus
spec:
  groups:
  - name: ODS_APPS_UP_STATE
    rules:
###########################################ODS_BS01_INGESTOR##########################################################
    - record: ods_bs01_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-bs-01"})*60)
    - alert: ods_bs01_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs01_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_bs01_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs01_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_BS46_INGESTOR##########################################################
    - record: ods_bs46_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-bs-46"})*60)
    - alert: ods_bs46_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs46_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_bs46_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs46_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_BS95_INGESTOR##########################################################
    - record: ods_bs95_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-bs-95"})*60)
    - alert: ods_bs95_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs95_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_bs95_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs95_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_DP01_INGESTOR##########################################################
    - record: ods_dp01_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-dp-01"})*60)
    - alert: ods_dp01_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_dp01_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_dp01_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_dp01_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_DV01_INGESTOR##########################################################
    - record: ods_dv01_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-dv-01"})*60)
    - alert: ods_dv01_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_dv01_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_dv01_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_dv01_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC03_INGESTOR##########################################################
    - record: ods_kc03_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-03"})*60)
    - alert: ods_kc03_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc03_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc03_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc03_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC13_INGESTOR##########################################################
    - record: ods_kc13_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-13"})*60)
    - alert: ods_kc13_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc13_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc13_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc13_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_KC43_INGESTOR##########################################################
    - record: ods_kc43_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-43"})*60)
    - alert: ods_kc43_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_KC43_R13_INGESTOR##########################################################
    - record: ods_kc43_r13_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-43-r-13"})*60)
    - alert: ods_kc43_r13_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r13_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r13_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r13_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_KC43_R14_INGESTOR##########################################################
    - record: ods_kc43_r14_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-43-r-14"})*60)
    - alert: ods_kc43_r14_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r14_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r14_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r14_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_KC43_R15_INGESTOR##########################################################
    - record: ods_kc43_r15_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-43-r-15"})*60)
    - alert: ods_kc43_r15_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r15_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r15_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r15_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_KC43_R16_INGESTOR##########################################################
    - record: ods_kc43_r16_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-43-r-16"})*60)
    - alert: ods_kc43_r16_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r16_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r16_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r16_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_KC43_R17_INGESTOR##########################################################
    - record: ods_kc43_r17_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-43-r-17"})*60)
    - alert: ods_kc43_r17_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r17_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r17_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r17_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_KC43_R18_INGESTOR##########################################################
    - record: ods_kc43_r18_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-43-r-18"})*60)
    - alert: ods_kc43_r18_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r18_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r18_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r18_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_KC43_R19_INGESTOR##########################################################
    - record: ods_kc43_r19_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-43-r-19"})*60)
    - alert: ods_kc43_r19_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r19_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r19_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r19_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_KC43_R20_INGESTOR##########################################################
    - record: ods_kc43_r20_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-43-r-20"})*60)
    - alert: ods_kc43_r20_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r20_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r20_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r20_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_KC43_R21_INGESTOR##########################################################
    - record: ods_kc43_r21_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-kc-43-r-21"})*60)
    - alert: ods_kc43_r21_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r21_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r21_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r21_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_PE06_INGESTOR##########################################################
    - record: ods_pe06_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-pe-06"})*60)
    - alert: ods_pe06_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe06_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe06_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe06_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE09_INGESTOR##########################################################
    - record: ods_pe09_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-pe-09"})*60)
    - alert: ods_pe09_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe09_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe09_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe09_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE10_INGESTOR##########################################################
    - record: ods_pe10_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-pe-10"})*60)
    - alert: ods_pe10_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe10_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe10_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe10_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE11_INGESTOR##########################################################
    - record: ods_pe11_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-pe-11"})*60)
    - alert: ods_pe11_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe11_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe11_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe11_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE16_INGESTOR##########################################################
    - record: ods_pe16_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-pe-16"})*60)
    - alert: ods_pe16_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe16_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe16_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe16_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE17_INGESTOR##########################################################
    - record: ods_pe17_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-pe-17"})*60)
    - alert: ods_pe17_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe17_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe17_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe17_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE34_INGESTOR##########################################################
    - record: ods_pe34_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-pe-34"})*60)
    - alert: ods_pe34_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe34_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe34_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe34_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PEA6_INGESTOR##########################################################
    - record: ods_pea6_ingestor_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (consumer_fetch_manager_metrics_records_consumed_rate {namespace="ods",job="tsb-ods-pr-ingest-pea-6"})*60)
    - alert: ods_pea6_ingestor_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pea6_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 1840 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pea6_ingestor_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pea6_ingestor_up_{{ AWS_ENVIRONMENT }}) > 1840
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 1840 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_BS01_SCYLLA##########################################################
    - record: ods_bs01_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-corporate-Information-BS01"}[1m])))
    - alert: ods_bs01_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs01_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_bs01_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs01_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_BS46_SCYLLA##########################################################
    - record: ods_bs46_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-bs46"}[1m])))
    - alert: ods_bs46_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs46_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_bs46_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs46_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_BS95_SCYLLA##########################################################
    - record: ods_bs95_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-product-BS95"}[1m])))
    - alert: ods_bs95_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs95_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_bs95_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_bs95_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_DP01_SCYLLA##########################################################
    - record: ods_dp01_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-product-DP01"}[1m])))
    - alert: ods_dp01_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_dp01_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_dp01_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_dp01_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_DV01_SCYLLA##########################################################
    - record: ods_dv01_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-account-DV01"}[1m])))
    - alert: ods_dv01_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_dv01_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_dv01_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_dv01_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC03_SCYLLA##########################################################
    - record: ods_kc03_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-KC03"}[1m])))
    - alert: ods_kc03_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc03_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc03_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc03_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC13_SCYLLA##########################################################
    - record: ods_kc13_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-pending-transaction-KC13"}[1m])))
    - alert: ods_kc13_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc13_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc13_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc13_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC43_SCYLLA##########################################################
    - record: ods_kc43_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-KC43"}[1m])))
    - alert: ods_kc43_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC43_R13_SCYLLA##########################################################
    - record: ods_kc43_r13_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-KC43-R13"}[1m])))
    - alert: ods_kc43_r13_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r13_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r13_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r13_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC43_R14_SCYLLA##########################################################
    - record: ods_kc43_r14_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-KC43-R14"}[1m])))
    - alert: ods_kc43_r14_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r14_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r14_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r14_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC43_R15_SCYLLA##########################################################
    - record: ods_kc43_r15_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-KC43-R15"}[1m])))
    - alert: ods_kc43_r15_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r15_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r15_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r15_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC43_R16_SCYLLA##########################################################
    - record: ods_kc43_r16_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-KC43-R16"}[1m])))
    - alert: ods_kc43_r16_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r16_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r16_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r16_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC43_R17_SCYLLA##########################################################
    - record: ods_kc43_r17_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-KC43-R17"}[1m])))
    - alert: ods_kc43_r17_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r17_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC43_R18_SCYLLA##########################################################
    - record: ods_kc43_r18_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-KC43-R18"}[1m])))
    - alert: ods_kc43_r18_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r18_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r18_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r18_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC43_R19_SCYLLA##########################################################
    - record: ods_kc43_r19_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-KC43-R19"}[1m])))
    - alert: ods_kc43_r19_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r19_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r19_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r19_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC43_R20_SCYLLA##########################################################
    - record: ods_kc43_r20_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-KC43-R20"}[1m])))
    - alert: ods_kc43_r20_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r20_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r20_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r20_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_KC43_R21_SCYLLA##########################################################
    - record: ods_kc43_r21_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-transaction-KC43-R21"}[1m])))
    - alert: ods_kc43_r21_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r21_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_kc43_r21_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_kc43_r21_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }}
###########################################ODS_PE06_SCYLLA##########################################################
    - record: ods_pe06_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-customer-PE06"}[1m])))
    - alert: ods_pe06_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe06_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe06_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe06_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE09_SCYLLA##########################################################
    - record: ods_pe09_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-addresses-PE09"}[1m])))
    - alert: ods_pe09_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe09_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe09_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe09_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE10_SCYLLA##########################################################
    - record: ods_pe10_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-business-customer-PE10"}[1m])))
    - alert: ods_pe10_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe10_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe10_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe10_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE11_SCYLLA##########################################################
    - record: ods_pe11_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-customer-PE11"}[1m])))
    - alert: ods_pe11_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe11_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe11_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe11_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE16_SCYLLA##########################################################
    - record: ods_pe16_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-customer-PE16"}[1m])))
    - alert: ods_pe16_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe16_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe16_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe16_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE17_SCYLLA##########################################################
    - record: ods_pe17_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-customer-address-PE17"}[1m])))
    - alert: ods_pe17_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe17_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe17_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe17_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PE34_SCYLLA##########################################################
    - record: ods_pe34_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-customer-PE34"}[1m])))
    - alert: ods_pe34_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe34_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pe34_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pe34_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 
###########################################ODS_PEA6_SCYLLA##########################################################
    - record: ods_pea6_scylla_up_{{ AWS_ENVIRONMENT }}
      expr: (sum by (job, namespace) (rate(kafka_consumer_records_consumed_total_records_total {namespace="ods",job="tsb-ods-cdc-address-history-PEA6"}[1m])))
    - alert: ods_pea6_scylla_up_yellow_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pea6_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 1m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: YELLOW
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} has reached peak rate of 3300 in 1 min. Value: {{ $value }}'
        summary: Yellow rate reached for Application {{ $labels.job }}            
    - alert: ods_pea6_scylla_up_red_alert_{{ AWS_ENVIRONMENT }}
      expr: (ods_pea6_scylla_up_{{ AWS_ENVIRONMENT }}) > 3300
      for: 5m
      labels:
        action: Closely monitor
        environment: "{{ AWS_ENVIRONMENT }}"
        group: INFRA
        level: RED
        platform: AWS
        namespace: ods
        severity: WARNING
        type: 8x5
        tsbci: ODS
      annotations:
        description: 'Application {{ $labels.job }} is at peak rate of 3300 for last 5 mins. Value: {{ $value }}'
        summary: Red rate reached for Application {{ $labels.job }} 